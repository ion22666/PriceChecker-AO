<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- <script src="http://127.0.0.1:3000/scripts/test.js" defer></script> -->

        <script src="/scripts/chartjs-adapter-date-fns.bundle.min.js"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/moment@^2"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@^1"></script> -->

        <style>
            main {
                height: 50vh;
                width: 50vw;
            }
            img,
            object {
                color: red;
                fill: red;
                height: 10vh;
            }
            .icon {
                fill: blue;
            }
        </style>
    </head>
    <body class="screen">
        <img src="https://icons.getbootstrap.com/assets/icons/eye-slash.svg" class="icon" />
        <object data="https://icons.getbootstrap.com/assets/icons/eye-slash.svg" type="image/svg+xml"></object>

        <main id="root" class="screen">
            <canvas></canvas>
            <button>Hide</button>
        </main>

        <script>
            let ctx = document.querySelector("canvas");
            let dataset = {
                data: [
                    {
                        x: "2021-11-05T00:00:00",
                        y: 50,
                    },
                    {
                        x: "2021-11-07 01:00:28",
                        y: 60,
                    },
                    {
                        x: "2021-11-07 09:00:28",
                        y: 20,
                    },
                ],
            };
            let chart = new Chart(ctx, {
                type: "line",
                data: {
                    datasets: [dataset],
                },

                options: {
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: "aaaaaa",
                            },
                            type: "time",
                            min: Date.parse("2021-11-01 00:00:00"),
                            max: Date.parse("2021-11-09 00:00:00"),
                            time: {
                                displayFormats: {
                                    day: "MMM d",
                                    hour: "HH a",
                                },
                                // unit: "hour",
                            },
                            ticks: {
                                source: "auto",
                            },
                        },
                        y: {
                            beginAtZero: true,
                        },
                    },

                    //  Responsive Config
                    responsive: true,
                    maintainAspectRatio: true,
                    aspectRatio: 16 / 9,
                    onResize: (a, b, c) => {
                        console.log(a, b, c);
                    },
                    plugins: {
                        legend: {
                            labels: {
                                usePointStyle: true,
                                pointStyle: "line",
                            },
                        },
                    },
                },
            });

            document.querySelector("button").onclick = e => {
                e.target.innerHTML = e.target.innerHTML == "Hide" ? "Display" : "Hide";
                dataset.hidden = !dataset.hidden;
                chart.update();
            };
        </script>
    </body>
</html>
