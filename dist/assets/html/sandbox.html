<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- <script src="http://127.0.0.1:3000/scripts/test.js" defer></script> -->

        <script src="/scripts/chartjs-adapter-date-fns.bundle.min.js"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/moment@^2"></script> -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@^1"></script> -->

        <style>
            main {
                height: 50vh;
                width: 50vw;
            }
            img,
            object {
                color: red;
                fill: red;
                height: 10vh;
            }
            .icon {
                fill: blue;
            }
        </style>
    </head>
    <body class="screen">
        <img src="https://icons.getbootstrap.com/assets/icons/eye-slash.svg" class="icon" />
        <object data="https://icons.getbootstrap.com/assets/icons/eye-slash.svg" type="image/svg+xml"></object>

        <main id="root" class="screen">
            <canvas id="myChart"></canvas>
            <button>Hide</button>
        </main>

        <script>
            var ctx = document.getElementById("myChart").getContext("2d");
            var data_pairs = [
                { x: "1", y: 100, z: 20 },
                { x: "2", y: 90, z: 15 },
                { x: "3", y: 80, z: 10 },
                { x: "4", y: 100, z: 20 },
                { x: "5", y: 90, z: 15 },
                { x: "6", y: 80, z: 10 },
            ];

            var myChart = new Chart(ctx, {
                type: "bar",
                data: {
                    datasets: [
                        {
                            type: "line",
                            label: "Price",
                            data: data_pairs,
                            yAxisID: "y-axis-1",
                            backgroundColor: "rgba(255, 99, 132, 0.2)",
                            borderColor: "rgba(255, 99, 132, 0.2)",
                        },
                        {
                            type: "bar",
                            label: "Count",
                            data: data_pairs,
                            yAxisID: "y-axis-2",
                            backgroundColor: "rgba(54, 162, 235, 0.2)",
                            borderColor: "rgba(54, 162, 235, 0.2)",
                        },
                    ],
                },
                options: {
                    scales: {
                        xAxes: [
                            {
                                type: "time",
                                time: {
                                    displayFormats: {
                                        quarter: "MMM YYYY",
                                    },
                                },
                            },
                        ],
                        yAxes: [
                            {
                                id: "y-axis-1",
                                type: "linear",
                                position: "left",
                                scaleLabel: {
                                    display: true,
                                    labelString: "Price",
                                },
                            },
                            {
                                id: "y-axis-2",
                                type: "linear",
                                position: "right",
                                scaleLabel: {
                                    display: true,
                                    labelString: "Count",
                                },
                                ticks: {
                                    beginAtZero: true,
                                },
                            },
                        ],
                    },
                    tooltips: {
                        callbacks: {
                            label: function (tooltipItem, data) {
                                var label = data.datasets[tooltipItem.datasetIndex].label || "";
                                if (label) {
                                    label += ": ";
                                }
                                label += `x: ${tooltipItem.xLabel}, y: ${tooltipItem.yLabel}, z: ${data_pairs[tooltipItem.index].z}`;
                                return label;
                            },
                        },
                    },
                },
            });

            document.querySelector("button").onclick = e => {
                e.target.innerHTML = e.target.innerHTML == "Hide" ? "Display" : "Hide";
                dataset.hidden = !dataset.hidden;
                chart.update();
            };
        </script>
    </body>
</html>
